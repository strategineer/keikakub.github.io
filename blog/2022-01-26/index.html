<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta content="Strat's Blog - Exploring Marcus Aurelius's Meditations" property="og:title"><meta content="I recently read Marcus Aurelius&rsquo;s Meditations (translated by Gregory Hays) and I quite enjoyed it. Some of his ideas are still relevant today and others haven&rsquo;t aged very well (which is not surprising given how far removed Marcus&rsquo;s experience of life is from our own).
Overall, the text was interesting enough for me to be motivated to make this little toy that shows you one of the &ldquo;meditations&rdquo; every time you refresh the page (tip: if you click/tap on a word it&rsquo;ll bring you to another meditation containing that word)...." property="og:description"><meta content="https://strategineer.com/blog/2022-01-26/" property="og:url"><meta content="/blog/2022-01-26/thumbnail_hub077de30f9d36da8ba3d597731c6e501_1548599_0x250_resize_q90_h2_box_3.webp" property="og:image"><meta name=twitter:card content="summary_large_image"><meta content="#43B581" data-react-helmet=true name=theme-color><link rel=apple-touch-icon sizes=180x180 href="/apple-touch-icon.png?v=1"><link rel=icon type=image/png sizes=32x32 href="/favicon-32x32.png?v=1"><link rel=icon type=image/png sizes=16x16 href="/favicon-16x16.png?v=1"><link rel=manifest href="/site.webmanifest?v=1"><link rel=mask-icon href="/safari-pinned-tab.svg?v=1" color=#5bbad5><link rel="shortcut icon" href="/favicon.ico?v=1"><meta name=msapplication-TileColor content="#da532c"><meta name=theme-color content="#ff0000"><meta name=description content="Author: strategineer, category: blog, description: "><link href="/css/site.min.26413a407f5fe25ae3cc5e7404205bf48f016a22706ed1ab2f3aef135f6cba4a.css" rel=stylesheet><link href=/pagefind/pagefind-ui.css rel=stylesheet><title>Strat's Blog</title></head><body id=documentTop><div class=container-fluid><div class="row no-margin justify-content-center"><div class="col-xl-12 main no-margin"><nav class=footer-index><div class="d-flex justify-content-center"><div class="col-xl-9 col-12"><div class="container author-blurb"><div class="row justify-content-center"><div class=col-auto><img loading=lazy alt="Strat's Avatar" class="rounded avatar-static float-left" src=/favicon.ico></div><div class="col-md-6 col-auto align-self-center"><div class=row><div class="col-auto text-center">Name's Strat; sometimes I write blog posts.</div></div></div></div></div></div></div></nav><div class="readable search"><div id=search></div></div><div class=readable><div class=blog-content data-pagefind-body><div class="row justify-content-center text-center page-title"><div class="col h1">Exploring Marcus Aurelius's Meditations</div></div><div class="row justify-content-center"><div class="col-auto align-self-center text-center">6min read</div></div><img loading=eager src=/blog/2022-01-26/thumbnail_hub077de30f9d36da8ba3d597731c6e501_1548599_200x0_resize_box_3.png height=200 width=200 class="img-fluid rounded mx-auto d-block" alt=Thumbnail><div class="row justify-content-center"><div class="col-auto align-self-center"><div class="d-flex justify-content-center d-flex-inline-list text-center"><ul class="list-inline ul-inline"><li class="list-inline-item li-inline"><a href=https://strategineer.com/blog/tags/tech/>Tech</a></li><li class="list-inline-item li-inline"><a href=https://strategineer.com/blog/tags/media/>Media</a></li></ul></div></div></div><div class="d-flex justify-content-center d-flex-inline-list text-center"><ul class="list-inline ul-inline"><li class="list-inline-item li-inline"><a href=https://github.com/strategineer/personal-website/blob/master/content/blog/2022-01-26/index.md>Github</a></li></ul></div><div class="row justify-content-center readable"><p>I recently read Marcus Aurelius&rsquo;s Meditations (translated by Gregory Hays) and I
quite enjoyed it. Some of his ideas are still relevant today and others haven&rsquo;t
aged very well (which is not surprising given how far removed Marcus&rsquo;s
experience of life is from our own).</p><p>Overall, the text was interesting enough for me to be motivated to make
<a href=/bin/meditations/>this little toy that shows you one of the &ldquo;meditations&rdquo; every time you refresh the page</a>
(tip: if you click/tap on a word it&rsquo;ll bring you to another meditation
containing that word).</p><p>It was fun!</p><p>It took me about 2h to get 90% of the way there and another 2h to polish
everything up and make it squeaky clean.</p><p>I&rsquo;ll quickly go over how it works for my own future reference. I&rsquo;ll share it
with y&rsquo;all as a tiny contribution to the common good (my man Marcus would be so
proud).</p><h2 id=get-a-digital-version-of-the-meditations>Get a digital version of the Meditations
<a href=#get-a-digital-version-of-the-meditations>¶</a></h2><p>First, I needed to acquire a digital version of the text (I try to read physical
books these days because writing notes in them is critical for me to retain the
information I&rsquo;m reading).</p><p>I used my expert Googler skills to find a PDF file of Gregory Hays&rsquo;s translation
of the text which I read.</p><p>Then, I used the aptly named <code>pdftotext</code> command line utility to take the PDF
file and extract the text from it.</p><h2 id=clean-up-the-digital-version-of-the-meditations>Clean up the digital version of the Meditations
<a href=#clean-up-the-digital-version-of-the-meditations>¶</a></h2><p>Now, I needed to find and separate each meditation in the text while also
removing all of the extra line breaks which have been retained through the
<code>pdftotext</code> process.</p><p>Technically, I could have done this by hand (which would have taken days of work
and would leave room for error) but why would I do that when I can make the
computer work for me.</p><p>I wrote a
<a href=https://github.com/strategineer/personal-website/blob/master/bin/get_meditations.py>python script to do the hard work for me</a>.</p><p>How?</p><p>Using <a href=https://en.wikipedia.org/wiki/Regular_expression>Regular Expressions</a>,
of course.</p><p>No matter what kind of programming you expect to do or enjoy doing, knowing how
to use regular expressions (regex) to sift through text is an invaluable skill.</p><p>Lucky for us, the text of the Meditations has a very regular structure.</p><p>The word &ldquo;Book&rdquo; followed by a space and number from 1 to 12 separates each of
the books within the text.</p><p>So, I wrote the following regex to separate the entire text into 12 chunks, one
for each book.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>BOOK_REGEX <span style=color:#f92672>=</span> re<span style=color:#f92672>.</span>compile(<span style=color:#e6db74>r</span><span style=color:#e6db74>&#34;Book [0-9]+&#34;</span>)
</span></span></code></pre></div><p><em>This simple regex should be read as &ldquo;find the word &lsquo;Book&rsquo;, followed by a space,
followed by one or more digits&rdquo;.</em></p><p>Each meditation within each book is preceded by a number followed by a dot.</p><p>So, I wrote the following regex to separate each book into each of its
meditations.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>POINT_REGEX <span style=color:#f92672>=</span> re<span style=color:#f92672>.</span>compile(<span style=color:#e6db74>r</span><span style=color:#e6db74>&#34;[0-9]+\.&#34;</span>)
</span></span></code></pre></div><p><em>This simple regex should be read as &ldquo;find one or more digits followed by a
dot&rdquo;. The &lsquo;.&rsquo; is a special regex character which refers to any character (it&rsquo;s a
wildcard) so we must &rsquo;escape&rsquo; its special meaning using a backslash.</em></p><p>The text we&rsquo;ve extracted from the PDF file has a ton of extra line breaks
everywhere which we don&rsquo;t want because we&rsquo;re not planning on displaying the text
in a fixed print format. The line breaks will be added as needed depending on
whether you&rsquo;re using a tiny phone or a gigantic computer screen to use this
tool.</p><p>So, I wrote the following regex to find and remove all of these line breaks.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>ARTIFICIAL_LINE_BREAK_REGEX <span style=color:#f92672>=</span> re<span style=color:#f92672>.</span>compile(<span style=color:#e6db74>r</span><span style=color:#e6db74>&#34;([a-zA-Z\-,\(\) ])\n+([a-zA-Z ])&#34;</span>)
</span></span></code></pre></div><p><em>This less simple regex should be read as &ldquo;find a letter, dash, comma, left
parentheses, right parentheses or space followed by a newline followed a letter
or space&rdquo;. Notice that we&rsquo;ve put everything to the left of the newline in
parentheses as well as everything to the right of the newline. These are called
&ldquo;groups&rdquo; and are useful to separate the different parts of a regex. In this
case, we use groups to detect the offending newlines (which we want to remove)
separate from there surrounding characters (which we don&rsquo;t want to remove).</em></p><p>We&rsquo;ve separated each book into each of its meditations in order, and so now the
script can print this data out in a JSON format which we can easily read and use
elsewhere.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>python3 get_meditations.py &gt; data/meditations.json
</span></span></code></pre></div><h2 id=make-use-of-the-meditations-in-our-code>Make use of the Meditations in our code
<a href=#make-use-of-the-meditations-in-our-code>¶</a></h2><p>The website you&rsquo;re on currently is built using
<a href=https://middlemanapp.com/>Middleman 4</a>. Middleman helps you make static web
pages by making it easier to separate your content from its layout and look.</p><p>This allows me to define how my blog posts look in one place (updating the look
if needed over time) while making it easy for me to write new blog posts without
having to think about how they&rsquo;re going to look while I&rsquo;m writing them.</p><p>So now, we have a JSON file containing all of the insightful and, sometimes,
cringe meditations.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>[...]</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;3.8\nThe mind of one set straight and purified: no pus, no dirt, no scabs.\nAnd not a life cut short by death, like an actor who stops before the play is done, the plot wound up.\n\nNeither servility nor arrogance. Neither cringing nor disdain. Neither excuses nor evasions.&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;3.9\nYour ability to control your thoughts\u2014treat it with respect.\nIt\u2019s all that protects your mind from false perceptions\u2014false to your nature, and that of all rational beings. It\u2019s what makes thoughtfulness possible, and affection for other people, and submission to the divine.&#34;</span>,
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>[...]</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>All the web pages on my website are &ldquo;static&rdquo; but that doesn&rsquo;t mean that I can&rsquo;t
do anything &ldquo;dynamic&rdquo; in them. I can, as long as I do it using javascript (which
runs locally in your browser).</p><p>Using the Embedded RuBy (ERB) templating engine, we can read all the meditations
from the JSON file we generated earlier then paste them directly into the
client-side javascript code (that&rsquo;s going to be responsible for making the
meditations tool work).</p><p>Separating our data from our code is useful (it usually is), because we can
change our data without needing to change our code. I did this every time I
tweaked the complex &ldquo;line break removing&rdquo; regex while I was trying to get it to
work properly and cover all of the weird edge cases.</p><h2 id=write-the-code-thatll-make-use-of-the-meditations>Write the code that&rsquo;ll make use of the Meditations
<a href=#write-the-code-thatll-make-use-of-the-meditations>¶</a></h2><p>The
<a href=https://github.com/strategineer/personal-website/blob/master/assets/js/meditations.js>javascript code is relatively simple</a>.</p><p>I built it up in layers.</p><p>I started by implementing the core functionality of showing a random meditation
every time the page was loaded.</p><p>Then, I added the meditation&rsquo;s book and number as a hash to the URL allowing you
to share or refer to specific meditations as well as navigate back and forth
between meditations that you&rsquo;ve read.</p><p>Finally, I added a feature allowing you to click/tap on a word in a meditation
to randomly show another meditation containing that same word. This allows you
to browse through meditations that cover similar topics which makes it easier
for you to discover the nuances and, sometimes, contradictions in them.</p><p>All throughout this process, I played around with the look and feel of the tool
using my decent knowledge of CSS and <a href=https://getbootstrap.com/>Bootstrap</a>
(which I&rsquo;ve been cultivating my entire career).</p><p>That&rsquo;s pretty much it.</p><h2 id=the-end>The End.
<a href=#the-end>¶</a></h2><p><a href=/bin/meditations/>I think it turned out pretty good</a> and I enjoyed making it.</p><p>Disgusting spaghetti code weighs you down like a ton of bricks, but clean code
lifts you up.</p><p>If I hadn&rsquo;t taken the time late last year to clean up my code to make it easier
for me to <a href=https://strategineer.com/pilk/>write about pilk</a>, making this toy
would have been much harder.</p><p>I&rsquo;m glad I did, and I&rsquo;m excited to make more little interactive toys and tools
like this.</p><blockquote class=blog-call-to-action>Follow me with fraidycat, or an RSS reader, to be notified whenever I write
something.</blockquote></div></div></div><div class="row justify-content-center"><div class="col-xl-6 readable-footer"></div></div><div class=end-page></div><div class="offcanvas show offcanvas-bottom" data-bs-scroll=true data-bs-backdrop=false tabindex=-1 id=offcanvasBottom aria-label="navigation bar"><div class=offcanvas-body><div class="menu-buttons row justify-content-center"><div class="col-auto btn-toolbar" role=toolbar aria-label="Main Toolbar"><div class="btn-group btn-group-lg"><a href=/blog/><button tabindex=-1 type=button aria-label="Go to Strat's blog" class="btn btn-lg btn-outline-dark">
<img alt="blog icon" src=/icons/journal-text.svg width=32 height=32 label="Go to Strat's Blog">
</button>
</a><a href=/books/><button tabindex=-1 type=button aria-label="Go to Strat's bookshelf sorted by date read" class="btn btn-lg btn-light">
<img alt="book icon" src=/icons/book.svg width=32 height=32 label="Go to Strat's books he's reading">
</button>
</a><a href=/authors/><button tabindex=-1 type=button aria-label="Go to Strat's bookshelf sorted by author" class="btn btn-lg btn-light">
<img alt="person icon" src=/icons/file-person.svg width=32 height=32 label="Go to Strat's author's he's read">
</button>
</a><a href=/><button tabindex=-1 type=button aria-label="Go to Strat's bookshelf sorted by genre" class="btn btn-lg btn-light">
<img alt="tag icon" src=/icons/bookshelf.svg width=32 height=32 label="Go to Strat's author's he's read"></button></a></div></div></div></div></div></div></div></div><script defer type=text/javascript src=/js/bundle.min.js></script><script defer src=/pagefind/pagefind-ui.js></script><script>window.addEventListener("DOMContentLoaded",e=>{new PagefindUI({element:"#search",showSubResults:!0})})</script></body></html>