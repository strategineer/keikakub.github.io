<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta content="Strat's Blog - The Second Coming of Rust" property="og:title"><meta content="In these UNCERTAIN TIMES, I&rsquo;ve found myself with a little more free time than usual because I haven&rsquo;t needed to commute to an office every day. I&rsquo;ve tried to funnel that energy into creative and constructive hobbies. Keyword: tried.
In the past week, I&rsquo;ve spent some of that time learning the Rust programming language. I&rsquo;ve heard a lot of good things about it and I finally took the plunge. Here&rsquo;s a couple of notable features that I&rsquo;ve managed to grok from my brief time with it...." property="og:description"><meta content="https://strategineer.com/blog/2020-09-19/" property="og:url"><meta content="/blog/2020-09-19/thumbnail_hu1980111752053563218.webp" property="og:image"><meta name=twitter:card content="summary_large_image"><meta content="#43B581" data-react-helmet=true name=theme-color><link rel=apple-touch-icon sizes=180x180 href="/apple-touch-icon.png?v=1"><link rel=icon type=image/png sizes=32x32 href="/favicon-32x32.png?v=1"><link rel=icon type=image/png sizes=16x16 href="/favicon-16x16.png?v=1"><link rel=manifest href="/site.webmanifest?v=1"><link rel=mask-icon href="/safari-pinned-tab.svg?v=1" color=#5bbad5><link rel="shortcut icon" href="/favicon.ico?v=1"><meta name=msapplication-TileColor content="#da532c"><meta name=theme-color content="#ff0000"><meta name=description content="Author: strategineer, category: blog, description: "><link href="/css/site.min.be9cf06c1ba8a317a75f7c573aa775e6c59a146cad598182e94d6c678772a3f7.css" rel=stylesheet><title>The Second Coming of Rust</title></head><body id=documentTop><div class=container-fluid><div class="row no-margin justify-content-center"><div class="col-xl-12 main no-margin"><div class=row><nav class="col footer-index"><div class="d-flex justify-content-center"><div class="container author-blurb"><div class="row justify-content-center"><div class=col-auto><img loading=lazy alt="Strat's Avatar" class="rounded avatar-static float-left" src=/favicon.ico></div><div class="col-auto align-self-center"><div class=row><div class="col-auto text-center">Name's Strat; I like writing hehe.</div></div></div></div></div></div></nav><div class="col search"><div id=search></div></div></div><article class=blog-content data-pagefind-filter=author:Strat data-pagefind-meta=author:Strat><div class="row justify-content-center text-center page-title"><div class="col h1">The Second Coming of Rust</div></div><div class="row justify-content-center"><div class="col-auto align-self-center text-center">(6min read, 1000 words)</div></div><img loading=eager src=/blog/2020-09-19/thumbnail_hu62950063059784347.png height=200 width=200 class="img-fluid rounded mx-auto d-block" alt=Thumbnail><div class="row justify-content-center"><div class="col-auto align-self-center"><div class="d-flex justify-content-center d-flex-inline-list text-center"><ul class="list-inline ul-inline"><li class="list-inline-item li-inline"><a href=https://strategineer.com/blog/tags/tech/><span data-pagefind-filter=tag><p class=tag>Tech</p></span></a></li></ul></div></div></div><div class="d-flex justify-content-center d-flex-inline-list text-center"><ul class="list-inline ul-inline"></ul></div><div class="row justify-content-center readable"><p>In these UNCERTAIN TIMES, I&rsquo;ve found myself with a little more free time than usual because I haven&rsquo;t needed to commute to an office every day. I&rsquo;ve tried to funnel that energy into creative and constructive hobbies. Keyword: <em>tried</em>.</p><p>In the past week, I&rsquo;ve spent some of that time learning the Rust programming language. I&rsquo;ve heard a lot of good things about it and I finally took the plunge. Here&rsquo;s a couple of notable features that I&rsquo;ve managed to grok from my brief time with it.</p></section><section id=everything-is-immutable><h2>Everything is immutable!
<a href=#everything-is-immutable>¶</a></h2><p>Immutability makes code easier to reason about. Rust has the strongest implementation of immutability I&rsquo;ve seen in a programming language.</p><p>Any variable you define is immutable by default.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#66d9ef>let</span> x <span style=color:#f92672>=</span> <span style=color:#ae81ff>5</span>;
</span></span><span style=display:flex><span><span style=color:#75715e>// The next line will explode
</span></span></span><span style=display:flex><span><span style=color:#75715e>//   gracefully at compile time
</span></span></span><span style=display:flex><span><span style=color:#75715e>//   if uncommented.
</span></span></span><span style=display:flex><span><span style=color:#75715e>// x = x + 1;
</span></span></span></code></pre></div><p>Revolutionary!</p><p>If you want to define a mutable variable, you have to explicitly write it out like this.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#66d9ef>mut</span> x <span style=color:#f92672>=</span> <span style=color:#ae81ff>5</span>;
</span></span><span style=display:flex><span><span style=color:#75715e>// The next line works as expected
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>x <span style=color:#f92672>=</span> x <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>;
</span></span></code></pre></div><p>This is good.</p><p>Same thing goes for function parameters, etc.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>Counter</span> {
</span></span><span style=display:flex><span>    n: <span style=color:#66d9ef>i32</span>,
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#66d9ef>impl</span> Counter {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// This CAN modify the Counter instance.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>pub</span> <span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>increment</span>(<span style=color:#f92672>&amp;</span><span style=color:#66d9ef>mut</span> self) {
</span></span><span style=display:flex><span>        self.n <span style=color:#f92672>=</span> self.n <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#75715e>// This CANNOT modify the Counter instance.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>pub</span> <span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>value</span>(<span style=color:#f92672>&amp;</span>self) -&gt; <span style=color:#66d9ef>i32</span> {
</span></span><span style=display:flex><span>        self.n
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Without using the <code>mut</code> keyword, you cannot modify the defined variable in any way; making it immutable. This is similar to how C++ handles its <code>const</code> keyword. Although, in Rust, having everything be immutable by default is even better.</p></section><section id=null-values-no-more><h2>Null values, no more!
<a href=#null-values-no-more>¶</a></h2><p>Handling <code>null</code> values is the bane of my existence when working with my favorite programming language, Python. Don&rsquo;t hold your breath Python, Rust is coming for your top spot!</p><p>The concept of a &ldquo;null value&rdquo; was a mistake, it leads to problems upon problems. Don&rsquo;t get me started on the whole <code>undefined</code> vs. <code>null</code> JavaScript debacle. What a mess&mldr;</p><p>If we can avoid it we should.</p><p>Most, if not all, functional programming languages use the concept of an option type which is a much better way of handling missing values. Although Rust isn&rsquo;t a purely functional programming language, it borrows some features from that paradigm like the option type.</p><p>In Rust, unlike other procedural programming languages, especially the object-oriented ones, the option type is not just ONE of many ways to handle missing values, it is the ONLY way. This combined with pattern matching, as shown below, forces you to handle any potentially missing values otherwise the compiler will complain (which is good).</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#66d9ef>let</span> o <span style=color:#f92672>=</span> <span style=color:#66d9ef>if</span> i <span style=color:#f92672>%</span> <span style=color:#ae81ff>2</span> <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span> {
</span></span><span style=display:flex><span>    None
</span></span><span style=display:flex><span>} <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>    Some(<span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> val <span style=color:#f92672>=</span> <span style=color:#66d9ef>match</span> o {
</span></span><span style=display:flex><span>  Some(n) <span style=color:#f92672>=&gt;</span> n <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>,
</span></span><span style=display:flex><span>  <span style=color:#75715e>// If the following line was missing,
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#75715e>//   then the compiler would complain.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  None <span style=color:#f92672>=&gt;</span> <span style=color:#ae81ff>1</span>,
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>println!(<span style=color:#e6db74>&#34;</span><span style=color:#e6db74>{}</span><span style=color:#e6db74>&#34;</span>, val);
</span></span></code></pre></div><p>Having the compiler detect, and nag us about, every possible case where we might run into a missing value helps us write safe and functional code.</p></section><section id=cargo---an-environment-and-package-manager-for-the-common-folk><h2>Cargo - an environment and package manager for the common folk!
<a href=#cargo---an-environment-and-package-manager-for-the-common-folk>¶</a></h2><p>Cargo is the package manager of the Rust language and it does exactly what you would expect it to do. Compared to the profoundly awful mess that is the equivalent Python solution.</p><p>I don&rsquo;t want to get into the mess that is Python virtual environments, the differences between Python 2 and Python 3, pip vs. pip3, and more. Even after a decade of working with Python I still don&rsquo;t fully understand all the intricacies of how it handles, or doesn&rsquo;t handle, dependencies.</p><p>Comparatively, Cargo is God&rsquo;s gift to the world. It is easy to understand and make use of.</p><p>A single official package and environment manager that works like it should isn&rsquo;t a sexy feature, I&rsquo;ll give you that. But a programming language that gets the boring stuff like this right allows you to focus on solving interesting problems.</p><p>How does it work? Any dependencies are specified in a <code>Cargo.toml</code> file like so.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-toml data-lang=toml><span style=display:flex><span>[<span style=color:#a6e22e>package</span>]
</span></span><span style=display:flex><span><span style=color:#a6e22e>name</span> = <span style=color:#e6db74>&#34;tmer&#34;</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>version</span> = <span style=color:#e6db74>&#34;0.1.0&#34;</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>authors</span> = [<span style=color:#e6db74>&#34;strategineer &lt;me@strategineer.com&gt;&#34;</span>]
</span></span><span style=display:flex><span><span style=color:#a6e22e>edition</span> = <span style=color:#e6db74>&#34;2018&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>[<span style=color:#a6e22e>dependencies</span>]
</span></span><span style=display:flex><span><span style=color:#a6e22e>clap</span> = <span style=color:#e6db74>&#34;2.33.3&#34;</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>rand</span> = <span style=color:#e6db74>&#34;0.7.3&#34;</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>log</span> = <span style=color:#e6db74>&#34;0.4.11&#34;</span>
</span></span></code></pre></div><p>Running the following commands in your shell from anywhere in your project directory; they&rsquo;ll do what you expect using the dependencies you&rsquo;ve set up.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>echo <span style=color:#e6db74>&#34;Update your dependencies.&#34;</span>
</span></span><span style=display:flex><span>cargo update
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;Run your code.&#34;</span>
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;This will update your dependencies if needed.&#34;</span>
</span></span><span style=display:flex><span>cargo run
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;Test your code.&#34;</span>
</span></span><span style=display:flex><span>cargo test
</span></span></code></pre></div><p>Cargo just works. Unlike other systems like it, I don&rsquo;t need to be a brain surgeon, with a minor in extrasensory perception, to fully grasp how to specify dependencies and execute my code.</p></section><section id=plug-and-play---traits><h2>Plug and Play - Traits!
<a href=#plug-and-play---traits>¶</a></h2><p>Basically, traits are:</p><ul><li>Interfaces</li><li>With default implementations</li><li>Can be added willy-nilly to any struct</li></ul><p>They are somewhat reminiscent of mixins in object-oriented programming. You can take any struct, add traits to it to augment it with added functionality like so.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#75715e>#[derive(Debug)]</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>Counter</span> {
</span></span><span style=display:flex><span>    name: String,
</span></span><span style=display:flex><span>    n: <span style=color:#66d9ef>i32</span>,
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>In this case, we&rsquo;ve added the <code>Debug</code> trait to the <code>Counter</code> struct. Without having to write any additional code, this allows us to output any instance of the struct as text for debugging purposes as shown below.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> c <span style=color:#f92672>=</span> Counter {
</span></span><span style=display:flex><span>        name: <span style=color:#e6db74>&#34;C1&#34;</span>.to_string(),
</span></span><span style=display:flex><span>        n: <span style=color:#ae81ff>20</span>,
</span></span><span style=display:flex><span>    };
</span></span><span style=display:flex><span>    println!(<span style=color:#e6db74>&#34;</span><span style=color:#e6db74>{:?}</span><span style=color:#e6db74>&#34;</span>, c);
</span></span><span style=display:flex><span>    <span style=color:#75715e>// OUTPUT:
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>// Counter { name: &#34;C1&#34;, n: 20 }
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span></code></pre></div><p>We can use the following syntax to specify a trait&rsquo;s behavior explicitly, overriding a trait&rsquo;s default implementation if it has one. For example, if we would like to allow a struct to be transformed into text a specific way (for non-debugging purposes) then we can implement the <code>fmt::Display</code> trait for the <code>Counter</code> struct like so.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#66d9ef>use</span> std::fmt;
</span></span><span style=display:flex><span><span style=color:#66d9ef>impl</span> fmt::Display <span style=color:#66d9ef>for</span> Counter {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>fmt</span>(<span style=color:#f92672>&amp;</span>self,
</span></span><span style=display:flex><span>        f: <span style=color:#66d9ef>&amp;</span><span style=color:#a6e22e>mut</span> fmt::Formatter<span style=color:#f92672>&lt;</span>&#39;_<span style=color:#f92672>&gt;</span>) -&gt; <span style=color:#a6e22e>fmt</span>::Result {
</span></span><span style=display:flex><span>        write!(f,
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#34;Counter &#39;{}&#39; has the value: {}&#34;</span>,
</span></span><span style=display:flex><span>            self.name,
</span></span><span style=display:flex><span>            self.n)
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Notice that this is done outside of the context of the struct&rsquo;s definition. So, we can even implement the functionality tied to a trait as shown above for structs defined outside of our own code.</p><p>These are simple examples. Built-in traits like the <code>Eq</code> and <code>Ord</code> traits provide the interfaces and default implementations for equality checking and ordering, respectively. Add them to any struct and it just works as you would expect.</p></section><section id=rusteroni-pepperoni><h2>Rusteroni Pepperoni
<a href=#rusteroni-pepperoni>¶</a></h2><p>And that&rsquo;s all folks.</p><p>I&rsquo;ve been enjoying playing around with Rust; I&rsquo;m building a small command line application that randomly generates teams over multiple rounds for playing games online with friends called <a href=https://github.com/strategineer/tmer>tmer</a>. If you want to take a look at that or help out, feel free!</p><p>Other than the truly awful word play, Rustaceans, used by the Rust community to refer to programmers who use Rust, I can&rsquo;t find anything, yet, to dislike about the language and its ecosystem. I&rsquo;m excited to continue exploring it!</p><blockquote class=blog-call-to-action>Follow me with fraidycat, or an RSS reader, to be notified whenever I write
something.</blockquote></div></article><div class="row justify-content-center"><div class="col-xl-6 readable-footer"><nav class=footer><div class="d-flex justify-content-center col-12"><div class=col-12><div class="d-flex justify-content-center footer-paginator-next"><div class="next-article-link col-12 mx-auto"><a href=https://strategineer.com/blog/2020-09-28/>◀️Power Fantasies, Environments in LoG 2</a></div></div><div class="d-flex justify-content-center footer-paginator-previous"><div class="previous-article-link col-12 mx-auto"><a href=https://strategineer.com/blog/2020-09-13/>▶️My favorite games of the past, present and future</a></div></div></div></div></nav></div></div><div class=end-page></div><div class="offcanvas show offcanvas-bottom" data-bs-scroll=true data-bs-backdrop=false tabindex=-1 id=offcanvasBottom aria-label="navigation bar"><div class=offcanvas-body><div class="menu-buttons row justify-content-center"><div class="col-auto btn-toolbar" role=toolbar aria-label="Main Toolbar"><div class="btn-group btn-group-lg"><a href=/blog/><button tabindex=-1 type=button aria-label="Go to Strat's blog" class="menu-button btn btn-lg btn-secondary">
<img class="icon icon-filter" alt="blog icon" src=/icons/journal-text.svg width=32 height=32 label="Go to Strat's Blog">
</button>
</a><a href=/authors/><button tabindex=-1 type=button aria-label="Go to Strat's bookshelf sorted by author" class="menu-button btn btn-lg btn-dark">
<img class="icon icon-filter" alt="person icon" src=/icons/file-person.svg width=32 height=32 label="Go to Strat's author's he's read">
</button>
</a><a href=/books/tags><button tabindex=-1 type=button aria-label="Go to Strat's bookshelf sorted by genre" class="menu-button btn btn-lg btn-dark">
<img class="icon icon-filter" alt="tag icon" src=/icons/bookshelf.svg width=32 height=32 label="Go to Strat's author's he's read">
</button>
</a><a href=/books><button tabindex=-1 type=button aria-label="Go to Strat's bookshelf sorted by date read" class="menu-button btn btn-lg btn-dark">
<img class="icon icon-filter" alt="book icon" src=/icons/book.svg width=32 height=32 label="Go to Strat's books he's reading">
</button>
</a><a href=/wads><button tabindex=-1 type=button aria-label="Go to Strat's Wad Thoughts sorted by date finished" class="menu-button btn btn-lg btn-dark">
<img class="icon icon-filter" alt="doom icon" src=/icons/doom.svg width=32 height=32 label="Go to Strat's Wad Thoughts"></button></a></div></div></div></div></div></div></div></div><script defer type=text/javascript src=/js/bundle.min.js></script><link href=/pagefind/pagefind-ui.css rel=stylesheet><script src=/pagefind/pagefind-ui.js></script><script>window.addEventListener("DOMContentLoaded",e=>{new PagefindUI({element:"#search",showEmptyFilters:!1})})</script></body></html>